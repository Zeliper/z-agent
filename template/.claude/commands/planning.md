# /planning Command

사용자가 작업 계획을 수립할 때 사용하는 z-agent 명령어입니다.

## 실행 시 반드시 수행할 작업

이 명령어가 실행되면 **z-agent MCP 도구들을 사용**하여 처리하세요:

### 1. 난이도 분석
```
z_analyze_difficulty 도구 호출
- input: 사용자의 계획 요청
- 전체 작업의 난이도 파악
```

### 2. 관련 Lesson 검색
```
z_search_lessons 도구 호출
- query: 계획 관련 키워드
- 이전 유사 작업에서의 교훈 참조
```

### 3. 계획 수립 및 사용자 검토
- 작업을 논리적 Phase와 단계로 분해
- 각 단계별 난이도(H/M/L) 판정
- 계획서를 사용자에게 제시
- **사용자 승인 대기**

### 4. 승인 후 Task 생성
사용자가 승인하면:
```
z_create_task 도구 호출
- description: 계획 제목
- todos: 계획에서 도출된 TODO 목록
```

그 후 `/task` 명령어와 동일하게 처리

## 예시

```
사용자: /planning 마이크로서비스 아키텍처로 전환

1. z_analyze_difficulty(input="마이크로서비스 아키텍처로 전환")
   → difficulty: H

2. z_search_lessons(query="마이크로서비스 아키텍처 리팩토링")
   → 관련 lesson 확인

3. 계획서 작성 및 제시:
   - Phase 1: 준비 (2단계)
   - Phase 2: 구현 (3단계)
   - Phase 3: 테스트 (2단계)

4. 사용자: "진행해줘"

5. z_create_task(description="마이크로서비스 아키텍처 전환", todos=[...])
   → taskId: task-001

6. TODO 순차 처리...
```

## 계획서 형식

```markdown
## 마이크로서비스 아키텍처 전환 계획

**전체 난이도**: H | **총 단계**: 7개

### Phase 1: 준비
- [ ] 1.1 현재 의존성 분석 (M)
- [ ] 1.2 분리 가능한 모듈 식별 (H)

### Phase 2: 구현
- [ ] 2.1 서비스 분리 (H)
- [ ] 2.2 API 게이트웨이 설정 (H)
- [ ] 2.3 서비스 간 통신 구현 (H)

### Phase 3: 테스트 및 배포
- [ ] 3.1 통합 테스트 (M)
- [ ] 3.2 배포 스크립트 작성 (M)

### 리스크
| 리스크 | 영향 | 대응 방안 |
|--------|------|-----------|
| 데이터 불일치 | 높음 | 트랜잭션 관리 강화 |

---
이 계획을 진행할까요?
```

## 주의사항

- **z_analyze_difficulty, z_search_lessons, z_create_task MCP 도구 사용**
- 즉시 실행하지 않고 계획만 먼저 수립
- 사용자 검토 및 수정 기회 제공
- 승인 후 `/task`와 동일하게 MCP 도구로 처리
- **`.z-agent/`와 `.claude/` 폴더는 z-agent 시스템 폴더이므로 프로젝트 분석 시 제외**
